<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Organizer Avanzato</title>
<style>
  /* ...base e stile come nel template precedente... */
  /* Aggiunge sezione letture con tabella */
  #reads table { width:100%; border-collapse: collapse; }
  #reads th, #reads td { border:1px solid #ddd; padding:6px; text-align:left; }
  #reads select, #reads input[type="number"]{width:100%;}
</style>
</head>
<body>
<header>Organizer Studio & Lavoro</header>
<main>
  <!-- To-Do List -->
  <section id="todo">
    <h2>To-Do</h2>
    <input id="todo-text" placeholder="Attività...">
    <select id="todo-priority"><option value="low">Bassa</option><option value="medium" selected>Media</option><option value="high">Alta</option></select>
    <button id="addTodo">Aggiungi</button>
    <ul id="todo-list"></ul>
  </section>
  <!-- Calendario -->
  <section id="calendar">
    <h2>Calendario</h2>
    <div id="calendar-container"></div>
  </section>
  <!-- Progetti -->
  <section id="projects">
    <h2>Progetti</h2>
    <input id="proj-title" placeholder="Nome progetto..."><button id="addProj">Aggiungi</button>
    <ul id="proj-list"></ul>
  </section>
  <!-- Letture quotidiane -->
  <section id="reads">
    <h2>Letture giornaliere</h2>
    <table>
      <tr><th>Libro</th><th>Stato</th><th>Valutazione</th></tr>
    </table>
    <input id="read-title" placeholder="Titolo">
    <select id="read-status"><option value="in corso">In corso</option><option value="iniziato">Iniziato</option><option value="completato">Completato</option></select>
    <input type="number" id="read-rating" placeholder="Stelle (1‑5)" min="1" max="5">
    <button id="addRead">Aggiungi lettura</button>
  </section>
  <!-- Note -->
  <section id="notes">
    <h2>Note rapide</h2>
    <textarea id="notes-text"></textarea>
  </section>
</main>
<footer>Creato da te – Organizza al meglio!</footer>
<script>
// To-Do
let todos = JSON.parse(localStorage.getItem('todos'))||[];
function renderTodos(){
  const ul=document.getElementById('todo-list'); ul.innerHTML='';
  todos.forEach((t,i)=>{
    const li=document.createElement('li');
    li.textContent=`[${t.priority}] ${t.text}`;
    if(t.completed) li.style.textDecoration='line-through';
    li.onclick=()=>{t.completed=!t.completed; localStorage.setItem('todos',JSON.stringify(todos)); renderTodos();};
    ul.appendChild(li);
  });
}
document.getElementById('addTodo').onclick=()=>{
  const txt=document.getElementById('todo-text').value.trim();
  const pr=document.getElementById('todo-priority').value;
  if(txt) { todos.push({text:txt,priority:pr,completed:false}); localStorage.setItem('todos',JSON.stringify(todos)); renderTodos(); document.getElementById('todo-text').value=''; }
};
renderTodos();

// Calendar semplice
function drawCalendar(){
  const cont=document.getElementById('calendar-container');
  const d=new Date(), m=d.getMonth(), y=d.getFullYear();
  let html=`<table><tr>`;
  ['Do','Lu','Ma','Me','Gi','Ve','Sa'].forEach(day=>html+=`<th>${day}</th>`);
  html+=`</tr><tr>`;
  const first=new Date(y,m,1).getDay();
  for(let i=0;i<first;i++) html+=`<td></td>`;
  const days=new Date(y,m+1,0).getDate();
  for(let dnum=1; dnum<=days; dnum++){
    const isToday=(dnum===d.getDate());
    html+=`<td class="${isToday?'today':''}">${dnum}</td>`;
    if((first+dnum)%7===0 && dnum<days) html+='</tr><tr>';
  }
  html+='</tr></table>';
  cont.innerHTML=html;
}
drawCalendar();

// Projects
let projects=JSON.parse(localStorage.getItem('projects'))||[];
function renderProjects(){
  const ul=document.getElementById('proj-list'); ul.innerHTML='';
  projects.forEach((p,i)=>{
    const li=document.createElement('li');
    li.innerHTML=`<strong>${p.title}</strong>
      <div><input type="range" min="0" max="100" value="${p.progress}" data-index="${i}" class="prog"></div>
      <span>${p.progress}%</span>`;
    ul.appendChild(li);
  });
  document.querySelectorAll('.prog').forEach(el=>{
    el.oninput=e=>{
      const idx=e.target.dataset.index;
      projects[idx].progress=e.target.value;
      localStorage.setItem('projects',JSON.stringify(projects)); renderProjects();
    };
  });
}
document.getElementById('addProj').onclick=()=>{
  const t=document.getElementById('proj-title').value.trim();
  if(t){projects.push({title:t,progress:0}); localStorage.setItem('projects',JSON.stringify(projects)); renderProjects(); document.getElementById('proj-title').value='';}
};
renderProjects();

// Letture
let reads=JSON.parse(localStorage.getItem('reads'))||[];
function renderReads(){
  const tbl=document.querySelector('#reads table'); tbl.innerHTML='<tr><th>Libro</th><th>Stato</th><th>Valutazione</th></tr>';
  reads.forEach(r=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${r.title}</td><td>${r.status}</td><td>${'★'.repeat(r.rating)}</td>`;
    tbl.appendChild(tr);
  });
}
document.getElementById('addRead').onclick=()=>{
  const t=document.getElementById('read-title').value.trim();
  const st=document.getElementById('read-status').value;
  const rt=parseInt(document.getElementById('read-rating').value)||1;
  if(t){reads.push({title:t,status:st,rating:rt}); localStorage.setItem('reads',JSON.stringify(reads)); renderReads(); document.getElementById('read-title').value='';}
};
renderReads();

// Notes
const notesArea=document.getElementById('notes-text');
notesArea.value=localStorage.getItem('notes')||'';
notesArea.oninput=()=>localStorage.setItem('notes',notesArea.value);
</script>
</body>
</html>
