<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baia Beach Cup 2x2 Misto - Live</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .header { background-color: #007bff; color: white; padding: 20px 0; text-align: center; }
        .container { margin-top: 30px; }
        .card-header { background-color: #e9ecef; font-weight: bold; }
        .match-live { background-color: #d4edda; border: 1px solid #c3e6cb; }
        .match-upcoming { background-color: #fff3cd; border: 1px solid #ffeeba; }
        .court-status-occupied { color: #dc3545; font-weight: bold; }
        .court-status-free { color: #28a745; font-weight: bold; }
    </style>
</head>
<body>

    <header class="header">
        <h1>Baia Beach Cup 2x2 Misto</h1>
        <p>Live Score & Aggiornamenti</p>
    </header>

    <div class="container">
        
        <div class="card mb-4">
            <div class="card-header">Partite in Corso</div>
            <div class="card-body">
                <div id="live-matches-container">
                    <p class="text-muted">Nessuna partita in corso.</p>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">Stato Campi</div>
            <div class="card-body">
                <ul class="list-group list-group-flush" id="court-status-list">
                    </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header">Prossime Partite</div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush" id="upcoming-matches-list">
                            </ul>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header">Classifica Giocatori (Rating Live)</div>
                    <div class="card-body">
                        <table class="table table-striped" id="player-ratings-table">
                            <thead>
                                <tr>
                                    <th>Pos.</th>
                                    <th>Giocatore</th>
                                    <th>Rating</th>
                                </tr>
                            </thead>
                            <tbody>
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header">Classifica Gironi</div>
                    <div class="card-body">
                        <div id="group-standings-container">
                            </div>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">Tabellone Finale</div>
                    <div class="card-body">
                        <div id="final-bracket-container">
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Funzioni per simulare l'aggiornamento dei dati
        // In un'applicazione reale, queste funzioni farebbero chiamate API
        
        function getLiveMatches() {
            // Qui andrebbe la logica per chiamare la tua API e ottenere i dati live
            // Per questo esempio, restituiamo dati fittizi
            return [
                { id: 'match1', team1: 'SABBATINI-FIORETTO', team2: 'VERDINI-FERRARI', court: 'Campo 7', score1: 21, score2: 18, set: 1 },
                { id: 'match2', team1: 'ESPOSTO-PALMIERI', team2: 'ANDREANELLI-ZINGARETTI', court: 'Campo 5', score1: 15, score2: 21, set: 2 }
            ];
        }

        function getUpcomingMatches() {
            // API per le prossime partite
            return [
                { id: 'match3', time: '18:00', team1: 'TARSI-FELIZIANI', team2: 'CATALANI-VERZOLINI', court: 'Campo 7', group: 'A' },
                { id: 'match4', time: '18:00', team1: 'LATINI-CRISTOFORI', team2: 'VERDINI-FERRARI', court: 'Campo 6', group: 'A' },
                { id: 'match5', time: '18:30', team1: 'SANFILIPPO-SANFILIPPO', team2: 'MEDICI-CARTUCCIA', court: 'Campo 5', group: 'B' }
            ];
        }

        function getCourtStatus() {
            // API per lo stato dei campi
            return {
                'Campo 7': 'Occupato',
                'Campo 6': 'Libero',
                'Campo 5': 'Occupato'
            };
        }

        function getGroupStandings() {
            // API per la classifica dei gironi
            return {
                'Girone A': [
                    { team: 'SABBATINI-FIORETTO', wins: 2, losses: 0, points: 6 },
                    { team: 'VERDINI-FERRARI', wins: 1, losses: 1, points: 3 }
                ],
                'Girone B': [
                    { team: 'ANDREANELLI-ZINGARETTI', wins: 1, losses: 0, points: 3 },
                    { team: 'ESPOSTO-PALMIERI', wins: 0, losses: 1, points: 0 }
                ]
            };
        }

        function getPlayerRatings() {
            // API per la classifica dei giocatori
            return [
                { player: 'SABBATINI-FIORETTO', rating: 1250 },
                { player: 'ANDREANELLI-ZINGARETTI', rating: 1240 },
                { player: 'VERDINI-FERRARI', rating: 1210 }
            ];
        }

        function getFinalBracket() {
            // API per il tabellone finale
            return [
                { round: 'Ottavi', matches: ['1°E vs 2°F', '2°A vs 1°H', '1°D vs 2°B'] },
                { round: 'Quarti', matches: ['vinc. OTT1 vs vinc. OTT2', 'vinc. OTT3 vs vinc. OTT4'] },
                { round: 'Semifinali', matches: ['SEMIFINALE 1', 'SEMIFINALE 2'] },
                { round: 'Finale', matches: ['FINALISSIMA'] }
            ];
        }

        // Funzioni per renderizzare l'HTML
        function renderLiveMatches() {
            const container = document.getElementById('live-matches-container');
            const liveMatches = getLiveMatches();
            if (liveMatches.length === 0) {
                container.innerHTML = '<p class="text-muted">Nessuna partita in corso.</p>';
                return;
            }
            container.innerHTML = liveMatches.map(match => `
                <div class="match-live p-3 mb-2 rounded">
                    <strong>${match.team1} vs ${match.team2}</strong><br>
                    Campo: ${match.court}<br>
                    Punteggio: ${match.score1} - ${match.score2} (Set ${match.set})
                </div>
            `).join('');
        }

        function renderUpcomingMatches() {
            const list = document.getElementById('upcoming-matches-list');
            const upcomingMatches = getUpcomingMatches();
            list.innerHTML = upcomingMatches.map(match => `
                <li class="list-group-item d-flex justify-content-between align-items-center match-upcoming">
                    <div>
                        <strong>${match.team1} vs ${match.team2}</strong>
                        <br><small>(${match.group})</small>
                    </div>
                    <div>
                        <span class="badge bg-primary rounded-pill me-2">${match.time}</span>
                        <span class="badge bg-info rounded-pill">${match.court}</span>
                    </div>
                </li>
            `).join('');
        }

        function renderCourtStatus() {
            const list = document.getElementById('court-status-list');
            const status = getCourtStatus();
            list.innerHTML = Object.keys(status).map(court => {
                const isOccupied = status[court] === 'Occupato';
                const statusClass = isOccupied ? 'court-status-occupied' : 'court-status-free';
                return `
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <strong>${court}</strong>
                        <span class="${statusClass}">${status[court]}</span>
                    </li>
                `;
            }).join('');
        }

        function renderGroupStandings() {
            const container = document.getElementById('group-standings-container');
            const standings = getGroupStandings();
            container.innerHTML = Object.keys(standings).map(groupName => {
                const groupTable = `
                    <h5 class="mt-3">${groupName}</h5>
                    <table class="table table-sm">
                        <thead>
                            <tr><th>Squadra</th><th>V</th><th>P</th></tr>
                        </thead>
                        <tbody>
                            ${standings[groupName].map(team => `
                                <tr><td>${team.team}</td><td>${team.wins}</td><td>${team.losses}</td></tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
                return groupTable;
            }).join('');
        }

        function renderPlayerRatings() {
            const tableBody = document.querySelector('#player-ratings-table tbody');
            const ratings = getPlayerRatings();
            tableBody.innerHTML = ratings.map((player, index) => `
                <tr>
                    <td>${index + 1}</td>
                    <td>${player.player}</td>
                    <td>${player.rating}</td>
                </tr>
            `).join('');
        }

        function renderFinalBracket() {
            const container = document.getElementById('final-bracket-container');
            const bracket = getFinalBracket();
            container.innerHTML = bracket.map(round => `
                <h5 class="mt-3">${round.round}</h5>
                <ul class="list-group list-group-flush">
                    ${round.matches.map(match => `<li class="list-group-item">${match}</li>`).join('')}
                </ul>
            `).join('');
        }

        // Funzione di aggiornamento principale
        function updateAllData() {
            renderLiveMatches();
            renderUpcomingMatches();
            renderCourtStatus();
            renderGroupStandings();
            renderPlayerRatings();
            renderFinalBracket();
        }

        // Aggiorna i dati ogni 10 secondi
        setInterval(updateAllData, 10000);

        // Chiamata iniziale
        updateAllData();
    </script>
</body>
</html>
